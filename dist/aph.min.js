!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(){return m.prototype.set.apply(this,arguments),this.aph.owner}function n(n,e){for(var r=[],o=0,i=n.length,f=void 0;o<i;o++)if(null!=(f=n[o]))if(f instanceof Node)~r.indexOf(f)||r.push(f);else{if(!(f instanceof NodeList||f instanceof HTMLCollection||f instanceof m||f instanceof Array&&f[0]instanceof Node))return["map","filter","forEach","get","call"].forEach(function(t){n[t]=m.prototype[t]}),n.set=t,n.aph={owner:e},c(n,f,function(t){return t.aph.owner}),n;for(var u=0,p=f.length;u<p;u++)~r.indexOf(f[u])||r.push(f[u])}return new m(r,e.aph.context,{owner:e})}function e(t){return"string"==typeof t}function r(t){return t&&!e(t)&&"function"!=typeof t&&null!=t.length}function o(t){return null!=t[0]||null!=t[t.length-1]}function i(t,n){var e,r;if(e=y.exec(t)){if(r=e[3])return n.getElementsByClassName(r);if(r=e[2])return n.getElementsByTagName(r);if(r=e[1])return l.getElementById(r)}return n.querySelectorAll(t)}function f(t){return t?t instanceof Node?t:e(t)?i(t,l)[0]:r(t)?t[0]:l:l}function u(t){return h||(h=l.implementation.createHTMLDocument()),h.body.innerHTML=t,h.body.childNodes[0]}function c(t,n,e){function r(n,r){if(null==t[r])try{n[r]instanceof Function?(d[i][r]||(d[i][r]="set"===r.substr(0,3)&&"s"!==r[r.length-1]?function(){var t=arguments;if(1===t.length&&t[0].constructor===Object)return e(this.forEach(function(e){for(var o in t[0])n[r].call(e,o,t[0][o])}));var i=this.map(function(e){return n[r].apply(e,t)});return o(i)?i:e(this)}:function(){var t=arguments,i=this.map(function(e){return n[r].apply(e,t)});return o(i)?i:e(this)}),t[r]=d[i][r]):p(t,r)}catch(n){p(t,r)}}var i=n.constructor.name;d[i]||(d[i]={});var f=Object.getPrototypeOf(n),u={};if(Object.getOwnPropertyNames(f).forEach(function(t){r(f,t),u[t]=1}),g[i])for(var c=g[i].length;c--;)r(n,g[i][c]);else{g[i]=[];for(var s in n)isNaN(s)&&!u[s]&&(g[i].push(s),r(n,s))}}function p(t,n){Object.defineProperty(t,n,{get:function(){return this.get(n)},set:function(t){this.set(n,t)}})}function s(t,n,e){return new m(t,n,e)}var h,a=Array.prototype,l=document,y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,d={},g={},m=function(t,n,r){if(this.aph=r||{},e(t)&&(t="<"===t[0]&&">"===t[t.length-1]&&t.length>2?u(t):i(t,this.aph.context=f(n))),!t)return this;if(t.nodeType||t===window)this[0]=t,this.length=1;else for(var o=this.length=t.length;o--;this[o]=t[o]);};m.prototype.call=function(t){var n=arguments,e=this.map(function(e,r){return e[t].apply(e,n)});return o(e)?e:this},m.prototype.map=function(){return n(a.map.apply(this,arguments),this)},m.prototype.filter=function(){return n(a.filter.apply(this,arguments),this)},m.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},m.prototype.find=function(t){return new m(t,this[0],{owner:this})},m.prototype.asArray=function(){return a.slice.call(this)},m.prototype.get=function(t){return this.map(function(n){return n[t]})},m.prototype.set=function(t,n){return"object"!=typeof t?this.forEach(function(e){e[t]=n}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},m.prototype.css=function(t,n){return"object"!=typeof t?null==n?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(e){e.style[t]=n}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},m.prototype.detach=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},m.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},m.prototype.appendTo=function(t){return new m(t).append(this),this},m.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},m.prototype.prependTo=function(t){return new m(t).prepend(this),this},m.prototype.html=function(t,n){if(null==t)return this.map(function(t){return t.innerHTML});if(!(n instanceof Function))return this.forEach(function(t){t.innerHTML=""}).append(t);r(t)||(t=[t]);for(var o=[],i=0,f=t.length;i<f;i++)if(r(t[i]))for(var c=0,p=t[i].length;c<p;c++)~o.indexOf(t[i][c])||o.push(t[i][c]);else o.push(t[i]);return this.forEach(function(t){return o.forEach(function(r){return n(t,e(r)?u(r):r)})})},s.fn=m.prototype,s.wrap=n,s.querySelector=function(t,n){i(t,f(n))};var v=["concat","copyWithin","fill","join","reduce","reduceRight","slice","splice","sort"];return Object.getOwnPropertyNames(a).forEach(function(t){~v.indexOf(t)||null!=s.fn[t]||(s.fn[t]=a[t])}),c(s.fn,u("<div>"),function(t){return t}),s});