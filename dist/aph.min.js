!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(){return w.prototype.set.apply(this,arguments),this.aph.owner}function n(n,e){for(var r=[],o=0,i=n.length,c=void 0;o<i;o++)if(null!=(c=n[o]))if(c instanceof Node)~r.indexOf(c)||r.push(c);else{if(!(c instanceof NodeList||c instanceof HTMLCollection||c instanceof w||c instanceof Array&&c[0]instanceof Node))return["map","filter","forEach","get","call"].forEach(function(t){n[t]=w.prototype[t]}),n.set=t,n.aph={owner:e},h(n,c,function(t){return t.aph.owner}),n;for(var u=0,f=c.length;u<f;u++)~r.indexOf(c[u])||r.push(c[u])}return new w(r,e.aph.context,{owner:e})}function e(t,n,e){e=e||1e3;for(var r=performance.now(),o=0;o<e;o++)t();return{elapsed:performance.now()-r,name:n}}function r(t,n){console.group(t),n.sort(function(t,n){return t.elapsed>n.elapsed}).forEach(function(t){console.log(t.name+" - "+t.elapsed+" msecs")}),console.groupEnd(t)}function o(t){return"string"==typeof t||t instanceof String}function i(t){return t&&!o(t)&&null!=t.length}function c(t){return null!=t[0]||null!=t[t.length-1]}function u(t,n){return m.slice.call(t,n||0)}function f(t,n){return/^#[\w-]*$/.test(t)?[window[t.slice(1)]]:u(/^\.[\w-]*$/.test(t)?n.getElementsByClassName(t.slice(1)):/^\w+$/.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t))}function p(t){return t instanceof Node?t:o(t)?f(t,document)[0]:i(t)?t[0]:document}function s(t){return y||(y=document.implementation.createHTMLDocument()),y.body.innerHTML=t,y.body.childNodes[0]}function a(t,n){return o(t)?"<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[s(t)]:f(t,n):t instanceof Node||t===window?[t]:i(t)?t:[]}function h(t,n,e){function r(n,r){if(null==t[r])try{n[r]instanceof Function?(g[o][r]||(g[o][r]=/^set/i.test(r)&&"s"!==r.slice(-1)?function(){var t=arguments;if(1===t.length&&t[0].constructor===Object)return e(this.forEach(function(e){for(var o in t[0])n[r].call(e,o,t[0][o])}));var o=this.map(function(e){return n[r].apply(e,t)});return c(o)?o:e(this)}:function(){var t=arguments,o=this.map(function(e){return n[r].apply(e,t)});return c(o)?o:e(this)}),t[r]=g[o][r]):l(t,r)}catch(n){l(t,r)}}var o=n.constructor.name;g[o]||(g[o]={});var i=Object.getPrototypeOf(n),u={};if(Object.getOwnPropertyNames(i).forEach(function(t){r(i,t),u[t]=1}),v[o])for(var f=v[o].length;f--;)r(n,v[o][f]);else{v[o]=[];for(var p in n)isNaN(p)&&!u[p]&&(v[o].push(p),r(n,p))}}function l(t,n){Object.defineProperty(t,n,{get:function(){return this.get(n)},set:function(t){this.set(n,t)}})}function d(t,n,e){return new w(t,n,e)}var y,m=Array.prototype,g={},v={},w=function(t,n,o){var i=this;this.aph=o||{},r("init",[e(function(){return i.aph.context=p(n)},"context"),e(function(){return a(t,i.aph.context=p(n))},"elems")]);for(var c=a(t,this.aph.context=p(n)),u=this.length=c.length;u--;this[u]=c[u]);};w.prototype.call=function(t){var n=u(arguments,1),e=this.map(function(e,r){return e[t].apply(e,n)});return c(e)?e:this},w.prototype.map=function(){return n(m.map.apply(this,arguments),this)},w.prototype.filter=function(){return n(m.filter.apply(this,arguments),this)},w.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},w.prototype.find=function(t){return new w(t,this[0],{owner:this})},w.prototype.asArray=function(){return u(this)},w.prototype.get=function(t){return this.map(function(n){return n[t]})},w.prototype.set=function(t,n){return"object"!=typeof t?this.forEach(function(e){e[t]=n}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},w.prototype.css=function(t,n){return"object"!=typeof t?null==n?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(e){e.style[t]=n}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},w.prototype.detach=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},w.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},w.prototype.appendTo=function(t){return new w(t).append(this),this},w.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},w.prototype.prependTo=function(t){return new w(t).prepend(this),this},w.prototype.html=function(t,n){if(null==t)return this.map(function(t){return t.innerHTML});if(!(n instanceof Function))return this.forEach(function(t){t.innerHTML=""}).append(t);i(t)||(t=[t]);for(var e=[],r=0,c=t.length;r<c;r++)if(i(t[r]))for(var u=0,f=t[r].length;u<f;u++)~e.indexOf(t[r][u])||e.push(t[r][u]);else e.push(t[r]);return this.forEach(function(t){return e.forEach(function(e){return n(t,o(e)?s(e):e)})})},d.fn=w.prototype,d.wrap=n,d.querySelector=function(t,n){f(t,p(n))};var E=["concat","copyWithin","fill","join","reduce","reduceRight","slice","splice","sort"];return Object.getOwnPropertyNames(m).forEach(function(t){~E.indexOf(t)||null!=d.fn[t]||(d.fn[t]=m[t])}),h(d.fn,s("<div>"),function(t){return t}),d});