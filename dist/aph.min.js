!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(t,n){return f.slice.call(t,n||0)}function n(t){return""+t===t}function e(t){return t&&!n(t)&&null!=t.length}function r(t){return t instanceof Node?t:n(t)?p.querySelector(t,document)[0]:e(t)?t[0]:document}function o(t,r){if(n(t)){var o=/<(\w*)\/?>/.exec(t);return o?[document.createElement(o[1])]:p.querySelector(t,r)}if(t instanceof Node||t===window)return[t];if(e(t))return t;if(null!=t)throw Error("aph: Invalid first parameter");return[]}function i(t,n,e){return new p(t,n,e)}var c,u={Array:Array.prototype},f=u.Array,p=function(t,n,e){this.meta=e||{};for(var i=o(t,this.meta.context=r(n)),c=this.length=i.length;c--;this[c]=i[c]);};p.prototype.call=function(n){var e=[],r=t(arguments,1);return this.forEach(function(t,o){null!=(o=t[n].apply(t,r))&&e.push(o)}),0 in e?e:this},p.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},p.prototype.map=function(){return p.flatWrap(f.map.apply(this,arguments),this)},p.prototype.filter=function(){return new p(f.filter.apply(this,arguments),this.meta.context,{owner:this})},p.prototype.slice=function(){return new p(f.slice.apply(this,arguments),this.meta.context,{owner:this})},p.prototype.find=function(t){return new p(t,this[0],{owner:this})},p.prototype.get=function(t){return+t===t?this[t]:p.flatWrap(this)},p.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},p.prototype.appendTo=function(t){return new p(t).append(this),this},p.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},p.prototype.prependTo=function(t){return new p(t).prepend(this),this},p.prototype.html=function(r,o){return void 0===r?this.map(function(t){return t.innerHTML}):(Array.isArray(r)||(r=[r]),r=r.reduce(function(n,r){return e(r)?n.concat(t(r)):(n.push(r),n)},[]),"function"==typeof o?this.forEach(function(t){return r.forEach(function(n){return o(t,n)})}):this.forEach(function(t){t.innerHTML="",r.forEach(function(e){t.innerHTML+=n(e)?e:e.outerHTML})}))},p.prototype.prop=function(t,e){return n(t)?void 0===e?this.map(function(n){return n[t]}):this.forEach(function(n){n[t]=e}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},p.prototype.css=function(t,e){return n(t)?void 0===e?this.map(function(n){return window.getComputedStyle(n)[t]}):this.forEach(function(n){n.style[t]=e}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},p.prototype.remove=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},p.prototype.on=function(t,n){var e=this;return t.split(" ").forEach(function(t){return e.addEventListener(t,n)}),this},p.prototype.off=function(t,n){var e=this;return t.split(" ").forEach(function(t){return e.removeEventListener(t,n)}),this},p.prototype.once=function(t,n){var e=this;return e.on(t,function t(r){n.call(this,r),e.off(r.type,t)})},p.querySelector=function(n,e){return e=r(e),/^#[\w-]*$/.test(n)?[window[n.slice(1)]]:t(/^\.[\w-]*$/.test(n)?e.getElementsByClassName(n.slice(1)):/^\w+$/.test(n)?e.getElementsByTagName(n):e.querySelectorAll(n))},p.flatWrap=function(t,n){for(var e=[],r=0,o=void 0;r<t.length;r++)if((o=t[r])instanceof Node||null==o)~e.indexOf(o)||e.push(o);else{if(!(o instanceof NodeList||o instanceof HTMLCollection||o instanceof p||o instanceof Array)){var i=t[0].constructor.name;return t.prop=c.prop,t.call=c.call,t.owner=n,u[i]||(u[i]=Object.getPrototypeOf(t[0])),Object.getOwnPropertyNames(u[i]).forEach(function(e){console.log(e),void 0===t[e]&&(t[e]=function(){var t=arguments,r=this.map(function(n){return u[i][e].apply(n,t)});return null==r[0]&&null==r[r.length-1]?n:r})}),null!=t.length&&(t.map=c.map,t.forEach=t.forEach||c.forEach),t}for(var f=0,a=o.length;f<a;f++)~e.indexOf(o[f])||e.push(o[f])}return new p(e,document,{owner:n})},c=p.prototype;var a=["concat","join","copyWithin","fill","reduce","reduceRight"];Object.getOwnPropertyNames(f).forEach(function(t){~a.indexOf(t)||void 0!==c[t]||(c[t]=f[t])});var s=document.createElement("div");for(var h in s)!function(n){c[n]||(s[n]instanceof Function?c[n]=function(){return this.call.apply(this,[n].concat(t(arguments)))}:Object.defineProperty(c,n,{get:function(){return this.prop(n)},set:function(t){this.prop(n,t)}}))}(h);return s=null,i.plug=function(t,n){p.prototype[t]=n},Object.getOwnPropertyNames(p).forEach(function(t){p[t]instanceof Function&&(i[t]=p[t])}),i});