!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(t,n){Object.defineProperty(t,n,{get:function(){return this.prop(n)},set:function(t){this.prop(n,t)}})}function n(t){return""+t===t}function e(t){return t&&!n(t)&&null!=t.length}function r(t){return null!=t[0]||null!=t[t.length-1]}function o(t,n){return a.Array.slice.call(t,n||0)}function i(t){return t instanceof Node?t:n(t)?c(t,document)[0]:e(t)?t[0]:document}function u(t,r){if(n(t)){var o=/<(\w*)\/?>/.exec(t);return o?[document.createElement(o[1])]:c(t,r)}if(t instanceof Node||t===window)return[t];if(e(t))return t;if(null!=t)throw Error("aph: Invalid first parameter");return[]}function c(t,n){return n=i(n),/^#[\w-]*$/.test(t)?[window[t.slice(1)]]:o(/^\.[\w-]*$/.test(t)?n.getElementsByClassName(t.slice(1)):/^\w+$/.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t))}function f(n,e){for(var o=[],i=0,u=void 0;i<n.length;i++)if((u=n[i])instanceof Node||null==u)~o.indexOf(u)||o.push(u);else{if(!(u instanceof NodeList||u instanceof HTMLCollection||u instanceof h||u instanceof Array)){var c=n[0].constructor.name;return n.prop=a.Apheleia.prop,n.call=a.Apheleia.call,n.owner=e,a[c]||(a[c]=Object.getPrototypeOf(n[0])),Object.getOwnPropertyNames(a[c]).forEach(function(o){if(null==n[o])try{a[c][o]instanceof Function?n[o]=function(){var t=arguments,n=this.map(function(n){return a[c][o].apply(n,t)});return r(n)?n:e}:t(n,o)}catch(e){t(n,o)}}),null!=n.length&&(n.map=a.Apheleia.map,n.forEach=a.Apheleia.forEach),n}for(var f=0,p=u.length;f<p;f++)~o.indexOf(u[f])||o.push(u[f])}return new h(o,document,{owner:e})}function p(t,n,e){return new h(t,n,e)}var a={Array:Array.prototype},l=a.Array,h=function(t,n,e){this.meta=e||{};for(var r=u(t,this.meta.context=i(n)),o=this.length=r.length;o--;this[o]=r[o]);};h.prototype.call=function(t){var n=o(arguments,1),e=this.map(function(e){return e[t].apply(e,n)});return r(e)?e:this},h.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},h.prototype.map=function(){return f(l.map.apply(this,arguments),this)},h.prototype.filter=function(){return new h(l.filter.apply(this,arguments),this.meta.context,{owner:this})},h.prototype.slice=function(){return new h(l.slice.apply(this,arguments),this.meta.context,{owner:this})},h.prototype.find=function(t){return new h(t,this[0],{owner:this})},h.prototype.get=function(t){return+t===t?this[t]:f(this)},h.prototype.prop=function(t,e){return n(t)?null==e?this.map(function(n){return n[t]}):this.forEach(function(n){n[t]=e}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},h.prototype.css=function(t,e){return n(t)?null==e?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(n){n.style[t]=e}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},h.prototype.remove=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},h.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},h.prototype.appendTo=function(t){return new h(t).append(this),this},h.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},h.prototype.prependTo=function(t){return new h(t).prepend(this),this},h.prototype.html=function(t,r){return null==t?this.map(function(t){return t.innerHTML}):(Array.isArray(t)||(t=[t]),t=t.reduce(function(t,n){return e(n)?t.concat(o(n)):(t.push(n),t)},[]),r instanceof Function?this.forEach(function(n){return t.forEach(function(t){return r(n,t)})}):this.forEach(function(e){e.innerHTML="",t.forEach(function(t){e.innerHTML+=n(t)?t:t.outerHTML})}))},a.Apheleia=h.prototype;var s=["concat","join","copyWithin","fill","reduce","reduceRight"];Object.getOwnPropertyNames(l).forEach(function(t){~s.indexOf(t)||null!=a.Apheleia[t]||(a.Apheleia[t]=l[t])});var y=document.createElement("div");for(var d in y)!function(n){a.Apheleia[n]||(y[n]instanceof Function?a.Apheleia[n]=function(){return this.call.apply(this,[n].concat(o(arguments)))}:t(a.Apheleia,n))}(d);return y=null,p.fn=h.prototype,p.flatWrap=f,p.querySelector=c,p});