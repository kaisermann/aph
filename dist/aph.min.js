!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(t,n){return n=f(n),/^#[\w-]*$/.test(t)?[window[t.slice(1)]]:u(/^\.[\w-]*$/.test(t)?n.getElementsByClassName(t.slice(1)):/^\w+$/.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t))}function n(){return g.prototype.set.apply(this,arguments),this.aph.owner}function e(t,e){for(var r=[],o=0,i=t.length,u=void 0;o<i;o++)if(null!=(u=t[o]))if(u instanceof Node)~r.indexOf(u)||r.push(u);else{if(!(u instanceof NodeList||u instanceof HTMLCollection||u instanceof g||u instanceof Array&&u[0]instanceof Node))return["map","filter","forEach","get","call"].forEach(function(n){t[n]=g.prototype[n]}),t.set=n,t.aph={owner:e},p(t,u,function(t){return t.aph.owner}),t;for(var f=0,c=u.length;f<c;f++)~r.indexOf(u[f])||r.push(u[f])}return new g(r,e.aph.context,{owner:e})}function r(t){return""+t===t}function o(t){return t&&!r(t)&&null!=t.length}function i(t){return null!=t[0]||null!=t[t.length-1]}function u(t,n){return d.slice.call(t,n||0)}function f(n){return n instanceof Node?n:r(n)?t(n,document)[0]:o(n)?n[0]:document}function c(t){return l||(l=document.implementation.createHTMLDocument()),l.body.innerHTML=t,l.body.childNodes[0]}function s(n,e){return r(n)?/<.+>/.test(n)?[c(n)]:t(n,e):n instanceof Node||n===window?[n]:o(n)?n:[]}function p(t,n,e){function r(n,r){if(null==t[r])try{n[r]instanceof Function?(y[o][r]||(y[o][r]=/^set/i.test(r)&&"s"!==r.slice(-1)?function(){var t=arguments;if(1===t.length&&t[0].constructor===Object)return e(this.forEach(function(e){for(var o in t[0])n[r].call(e,o,t[0][o])}));var o=this.map(function(e){return n[r].apply(e,t)});return i(o)?o:e(this)}:function(){var t=arguments,o=this.map(function(e){return n[r].apply(e,t)});return i(o)?o:e(this)}),t[r]=y[o][r]):a(t,r)}catch(n){a(t,r)}}var o=n.constructor.name;y[o]||(y[o]={});var u=Object.getPrototypeOf(n),f={};if(Object.getOwnPropertyNames(u).forEach(function(t){r(u,t),f[t]=1}),m[o])for(var c=m[o].length;c--;)r(n,m[o][c]);else{m[o]=[];for(var s in n)isNaN(s)&&!f[s]&&(m[o].push(s),r(n,s))}}function a(t,n){Object.defineProperty(t,n,{get:function(){return this.get(n)},set:function(t){this.set(n,t)}})}function h(t,n,e){return new g(t,n,e)}var l,d=Array.prototype,y={},m={},g=function(t,n,e){this.aph=e||{};for(var r=s(t,this.aph.context=f(n)),o=this.length=r.length;o--;this[o]=r[o]);};g.prototype.call=function(t){var n=u(arguments,1),e=this.map(function(e,r){return e[t].apply(e,n)});return i(e)?e:this},g.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},g.prototype.find=function(t){return new g(t,this[0],{owner:this})},g.prototype.asArray=function(){return u(this)},g.prototype.get=function(t){return this.map(function(n){return n[t]})},g.prototype.set=function(t,n){return"object"!=typeof t?this.forEach(function(e){e[t]=n}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},g.prototype.css=function(t,n){return"object"!=typeof t?null==n?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(e){e.style[t]=n}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},g.prototype.detach=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},g.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},g.prototype.appendTo=function(t){return new g(t).append(this),this},g.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},g.prototype.prependTo=function(t){return new g(t).prepend(this),this},g.prototype.html=function(t,n){if(null==t)return this.map(function(t){return t.innerHTML});if(!(n instanceof Function))return this.forEach(function(t){t.innerHTML=""}).append(t);o(t)||(t=[t]);for(var e=[],i=0,u=t.length;i<u;i++)if(o(t[i]))for(var f=0,s=t[i].length;f<s;f++)~e.indexOf(t[i][f])||e.push(t[i][f]);else e.push(t[i]);return this.forEach(function(t){return e.forEach(function(e){return n(t,r(e)?c(e):e)})})},h.fn=g.prototype,h.flatWrap=e,h.querySelector=t,["map","filter"].forEach(function(t){h.fn[t]=function(){return e(d[t].apply(this,arguments),this)}});var v=["concat","copyWithin","fill","join","reduce","reduceRight","slice","splice","sort"];return Object.getOwnPropertyNames(d).forEach(function(t){~v.indexOf(t)||null!=h.fn[t]||(h.fn[t]=d[t])}),p(h.fn,c("<div>"),function(t){return t}),h});