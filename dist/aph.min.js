!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(t,n){Object.defineProperty(t,n,{get:function(){return this.prop(n)},set:function(t){this.prop(n,t)}})}function n(t){return""+t===t}function e(t){return t&&!n(t)&&null!=t.length}function r(t){return null!=t[0]||null!=t[t.length-1]}function o(t,n){return h.Array.slice.call(t,n||0)}function i(t){return t instanceof Node?t:n(t)?c(t,document)[0]:e(t)?t[0]:document}function u(t,r){if(n(t))return/<.+>/.test(t)?(a||(a=document.implementation.createHTMLDocument()),a.body.innerHTML=t,a.body.childNodes):c(t,r);if(t instanceof Node||t===window)return[t];if(e(t))return t;if(null!=t)throw Error("aph: Invalid first parameter");return[]}function c(t,n){return n=i(n),/^#[\w-]*$/.test(t)?[window[t.slice(1)]]:o(/^\.[\w-]*$/.test(t)?n.getElementsByClassName(t.slice(1)):/^\w+$/.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t))}function f(n,e){for(var o=[],i=0,u=void 0;i<n.length;i++)if((u=n[i])instanceof Node||null==u)~o.indexOf(u)||o.push(u);else{if(!(u instanceof NodeList||u instanceof HTMLCollection||u instanceof y||u instanceof Array)){var c=n[0].constructor.name,f=h.Apheleia;return n.prop=f.prop,n.call=f.call,n.map=f.map,n.forEach=f.forEach,n.owner=e,h[c]||(h[c]=Object.getPrototypeOf(n[0])),s[c]||(s[c]=Object.getOwnPropertyNames(h[c])),s[c].forEach(function(e){if(null==n[e])try{h[c][e]instanceof Function?n[e]=function(){var t=arguments,n=this.map(function(n){return h[c][e].apply(n,t)});return r(n)?n:this.owner}:t(n,e)}catch(r){t(n,e)}}),n}for(var p=0,a=u.length;p<a;p++)~o.indexOf(u[p])||o.push(u[p])}return new y(o,document,{owner:e})}function p(t,n,e){return new y(t,n,e)}var a,h={Array:Array.prototype},s={},l=h.Array,y=function(t,n,e){this.meta=e||{};for(var r=u(t,this.meta.context=i(n)),o=this.length=r.length;o--;this[o]=r[o]);};y.prototype.call=function(t){var n=o(arguments,1),e=this.map(function(e){return e[t].apply(e,n)});return r(e)?e:this},y.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},y.prototype.map=function(){return f(l.map.apply(this,arguments),this)},y.prototype.filter=function(){return new y(l.filter.apply(this,arguments),this.meta.context,{owner:this})},y.prototype.slice=function(){return new y(l.slice.apply(this,arguments),this.meta.context,{owner:this})},y.prototype.find=function(t){return new y(t,this[0],{owner:this})},y.prototype.get=function(t){return+t===t?this[t]:o(this)},y.prototype.prop=function(t,e){return n(t)?null==e?this.map(function(n){return n[t]}):this.forEach(function(n){n[t]=e}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},y.prototype.css=function(t,e){return n(t)?null==e?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(n){n.style[t]=e}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},y.prototype.remove=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},y.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},y.prototype.appendTo=function(t){return new y(t).append(this),this},y.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},y.prototype.prependTo=function(t){return new y(t).prepend(this),this},y.prototype.html=function(t,r){return null==t?this.map(function(t){return t.innerHTML}):(Array.isArray(t)||(t=[t]),t=t.reduce(function(t,n){return e(n)?t.concat(o(n)):(t.push(n),t)},[]),r instanceof Function?this.forEach(function(n){return t.forEach(function(t){return r(n,t)})}):this.forEach(function(e){e.innerHTML="",t.forEach(function(t){e.innerHTML+=n(t)?t:t.outerHTML})}))},h.Apheleia=y.prototype;var d=["concat","join","copyWithin","fill","reduce","reduceRight"];Object.getOwnPropertyNames(l).forEach(function(t){~d.indexOf(t)||null!=h.Apheleia[t]||(h.Apheleia[t]=l[t])});var m=document.createElement("div");for(var w in m)!function(n){h.Apheleia[n]||(m[n]instanceof Function?h.Apheleia[n]=function(){return this.call.apply(this,[n].concat(o(arguments)))}:t(h.Apheleia,n))}(w);return m=null,p.fn=y.prototype,p.flatWrap=f,p.querySelector=c,p});