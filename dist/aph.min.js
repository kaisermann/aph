!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(t){return"string"==typeof t}function n(n){return n&&!t(n)&&"function"!=typeof n&&null!=n.length}function e(t){return null!=t[0]||null!=t[t.length-1]}function r(t,n){var e,r=a.exec(t);return(e=r[1])?document.getElementById(e):(e=r[2])?n.getElementsByTagName(e):(e=r[3])?n.getElementsByClassName(e):n.querySelectorAll(t)}function o(e){return e instanceof Node?e:t(e)?r(e,document)[0]:n(e)?e[0]:document}function i(t){return h||(h=document.implementation.createHTMLDocument()),h.body.innerHTML=t,h.body.childNodes[0]}function u(t,n,r){function o(n,o){if(null==t[o])try{n[o]instanceof Function?(l[i][o]||(l[i][o]="set"===o.substr(0,3)&&"s"!==o[o.length-1]?function(){var t=arguments;if(1===t.length&&t[0].constructor===Object)return r(this.forEach(function(e){for(var r in t[0])n[o].call(e,r,t[0][r])}));var i=this.map(function(e){return n[o].apply(e,t)});return e(i)?i:r(this)}:function(){var t=arguments,i=this.map(function(e){return n[o].apply(e,t)});return e(i)?i:r(this)}),t[o]=l[i][o]):f(t,o)}catch(n){f(t,o)}}var i=n.constructor.name;l[i]||(l[i]={});var u=Object.getPrototypeOf(n),c={};if(Object.getOwnPropertyNames(u).forEach(function(t){o(u,t),c[t]=1}),y[i])for(var p=y[i].length;p--;)o(n,y[i][p]);else{y[i]=[];for(var s in n)isNaN(s)&&!c[s]&&(y[i].push(s),o(n,s))}}function f(t,n){Object.defineProperty(t,n,{get:function(){return this.get(n)},set:function(t){this.set(n,t)}})}function c(){return m.prototype.set.apply(this,arguments),this.aph.owner}function p(t,n){for(var e=[],r=0,o=t.length,i=void 0;r<o;r++)if(null!=(i=t[r]))if(i instanceof Node)~e.indexOf(i)||e.push(i);else{if(!(i instanceof NodeList||i instanceof HTMLCollection||i instanceof m||i instanceof Array&&i[0]instanceof Node))return["map","filter","forEach","get","call"].forEach(function(n){t[n]=m.prototype[n]}),t.set=c,t.aph={owner:n},u(t,i,function(t){return t.aph.owner}),t;for(var f=0,p=i.length;f<p;f++)~e.indexOf(i[f])||e.push(i[f])}return new m(e,n.aph.context,{owner:n})}function s(t,n,e){return new m(t,n,e)}var h,a=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,l={},y={},d=Array.prototype,m=function(n,e,u){if(this.aph=u||{},this.aph.context=e=o(e),t(n)&&(n="<"===n[0]&&">"===n[n.length-1]&&n.length>2?i(n):r(n,e)),!n)return this;if(n.nodeType||n===window)this[0]=n,this.length=1;else for(var f=this.length=n.length;f--;this[f]=n[f]);};m.prototype.call=function(t){var n=arguments,r=this.map(function(e,r){return e[t].apply(e,n)});return e(r)?r:this},m.prototype.map=function(){return p(d.map.apply(this,arguments),this)},m.prototype.filter=function(){return p(d.filter.apply(this,arguments),this)},m.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},m.prototype.find=function(t){return new m(t,this[0],{owner:this})},m.prototype.asArray=function(){return d.slice.call(this)},m.prototype.get=function(t){return this.map(function(n){return n[t]})},m.prototype.set=function(t,n){return"object"!=typeof t?this.forEach(function(e){e[t]=n}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},m.prototype.css=function(t,n){return"object"!=typeof t?null==n?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(e){e.style[t]=n}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},m.prototype.detach=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},m.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},m.prototype.appendTo=function(t){return new m(t).append(this),this},m.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},m.prototype.prependTo=function(t){return new m(t).prepend(this),this},m.prototype.html=function(e,r){if(null==e)return this.map(function(t){return t.innerHTML});if(!(r instanceof Function))return this.forEach(function(t){t.innerHTML=""}).append(e);n(e)||(e=[e]);for(var o=[],u=0,f=e.length;u<f;u++)if(n(e[u]))for(var c=0,p=e[u].length;c<p;c++)~o.indexOf(e[u][c])||o.push(e[u][c]);else o.push(e[u]);return this.forEach(function(n){return o.forEach(function(e){return r(n,t(e)?i(e):e)})})},s.fn=m.prototype,s.wrap=p,s.querySelector=function(t,n){r(t,o(n))};var g=["concat","copyWithin","fill","join","reduce","reduceRight","slice","splice","sort"];return Object.getOwnPropertyNames(d).forEach(function(t){~g.indexOf(t)||null!=s.fn[t]||(s.fn[t]=d[t])}),u(s.fn,i("<div>"),function(t){return t}),s});