!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("aph",n):t.aph=n()}(this,function(){"use strict";function t(t,n){return n=f(n),/^#[\w-]*$/.test(t)?[window[t.slice(1)]]:i(/^\.[\w-]*$/.test(t)?n.getElementsByClassName(t.slice(1)):/^\w+$/.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t))}function n(t,n){for(var e=[],o=0,r=t.length,i=void 0;o<r;o++)if(null!=(i=t[o]))if(i instanceof Node)~e.indexOf(i)||e.push(i);else{if(!(i instanceof NodeList||i instanceof HTMLCollection||i instanceof d||i instanceof Array&&i[0]instanceof Node)){for(var f=void 0,c=0;null==f&&c<t.length;f=t[c++]);return["map","filter","forEach","get"].forEach(function(n){t[n]=d.prototype[n]}),t.set=function(){return d.prototype.set.apply(this,arguments),this.aph.owner},t.aph={owner:n},p(t,f,function(t){return t.aph.owner}),t}for(var u=0,s=i.length;u<s;u++)~e.indexOf(i[u])||e.push(i[u])}return new d(e,n.aph.context,{owner:n})}function e(t){return""+t===t}function o(t){return t&&!e(t)&&null!=t.length}function r(t){return null!=t[0]||null!=t[t.length-1]}function i(t,n){return l.slice.call(t,n||0)}function f(n){return n instanceof Node?n:e(n)?t(n,document)[0]:o(n)?n[0]:document}function c(t){return a||(a=document.implementation.createHTMLDocument()),a.body.innerHTML=t,a.body.childNodes[0]}function u(n,r){return e(n)?/<.+>/.test(n)?[c(n)]:t(n,r):n instanceof Node||n===window?[n]:o(n)?n:[]}function p(t,n,e,o){function i(i){if(null==t[i]&&!~o.indexOf(i))try{n[i]instanceof Function?t[i]=function(){var t,o=arguments;return t=/^set/i.test(i)&&1===o.length&&o[0].constructor===Object?this.map(function(t){for(var e in o[0])n[i].call(t,e,o[0][e])}):this.map(function(t){return n[i].apply(t,o)}),r(t)?t:e?e(this):this}:s(t,i)}catch(n){s(t,i)}}if(o=o||[],"object"!=typeof n)n=Object.getPrototypeOf(n),Object.getOwnPropertyNames(n).forEach(i);else for(var f in n)i(f)}function s(t,n){Object.defineProperty(t,n,{get:function(){return this.get(n)},set:function(t){this.set(n,t)}})}function h(t,n,e){return new d(t,n,e)}var a,l=Array.prototype,d=function(t,n,e){this.aph=e||{};for(var o=u(t,this.aph.context=f(n)),r=this.length=o.length;r--;this[r]=o[r]);};d.prototype.forEach=function(t){for(var n=0,e=this.length;n<e&&!1!==t.call(this,this[n],n++););return this},d.prototype.find=function(t){return new d(t,this[0],{owner:this})},d.prototype.asArray=function(){return i(this)},d.prototype.get=function(t){return this.map(function(n){return n[t]})},d.prototype.set=function(t,n){return"object"!=typeof t?this.forEach(function(e){e[t]=n}):this.forEach(function(n){for(var e in t)n[e]=t[e]})},d.prototype.css=function(t,n){return"object"!=typeof t?null==n?this.map(function(n){return getComputedStyle(n)[t]}):this.forEach(function(e){e.style[t]=n}):this.forEach(function(n){for(var e in t)n.style[e]=t[e]})},d.prototype.detach=function(){return this.forEach(function(t){t.parentNode.removeChild(t)})},d.prototype.append=function(t){return this.html(t,function(t,n){t.appendChild(n)})},d.prototype.appendTo=function(t){return new d(t).append(this),this},d.prototype.prepend=function(t){return this.html(t,function(t,n){t.insertBefore(n,t.firstChild)})},d.prototype.prependTo=function(t){return new d(t).prepend(this),this},d.prototype.html=function(t,n){if(null==t)return this.map(function(t){return t.innerHTML});if(!(n instanceof Function))return this.forEach(function(t){t.innerHTML=""}).append(t);o(t)||(t=[t]);for(var r=[],i=0,f=t.length;i<f;i++)if(o(t[i]))for(var u=0,p=t[i].length;u<p;u++)~r.indexOf(t[u])||r.push(t[u]);else r.push(t[i]);return this.forEach(function(t){return r.forEach(function(o){return n(t,e(o)?c(o):o)})})},h.fn=d.prototype,h.flatWrap=n,h.querySelector=t,["map","filter"].forEach(function(t){h.fn[t]=function(){return n(l[t].apply(this,arguments),this)}});var y=["concat","copyWithin","fill","join","reduce","reduceRight","slice","splice"];return Object.getOwnPropertyNames(l).forEach(function(t){~y.indexOf(t)||null!=h.fn[t]||(h.fn[t]=l[t])}),p(h.fn,document.createElement("div"),null,["remove"]),h});